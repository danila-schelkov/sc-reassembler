# SC Reassembler

[EN](./README.md)

SC Reassembler — демонстрационный проект, показывающий, как можно использовать модули
[SC Editor](https://github.com/danila-schelkov/sc-editor) для собственных целей.
Основная задача проекта — «понижение версии» файлов формата SC2 и сохранение их в старом
формате SC.

## Основные возможности

- Работа с экспортами: возможность исключать из файла экспорты по их именам или,
  наоборот, собирать файл только из нужных экспортов.

- Понижение версии файлов: конвертация файлов формата SC2 в формат SC,
  для которого существует большее количество инструментов для редактирования.

## Как использовать?

1. Клонирование репозитория:

   ```bash
   git clone https://github.com/danila-schelkov/sc-reassembler.git
   ```

2. Сборка проекта в единый jar файл:

   ```bash
   cd sc-reassembler
   ./gradlew shadowJar
   ```

3. Запуск приложения:

   ```bash
   ./gradlew run --args="[options]"  # or
   java -jar build/libs/sc-reassembler-{version}-all.jar [options]
   ```

Доступные опции:

- `--exports <имя текстового файла>`: указание файла с нужными именами экспортов.

- `--negate`: при указании данного флага экспорты из файла exports будут исключаться из
  файла, а не добавляться в него.

- `--files <путь>`: указать путь к входному файлу SC или SC2.

- `--directory <путь>`: указать путь к папке с нужными SC файлами.

Пример использования:

   ```bash
   java -jar build/libs/sc-reassembler.jar --files path/to/input.sc --exports exports.txt
   ```

После вызова данной команды, рядом с файлом `path/to/input.sc` появится папка
`reassembled`, в которой будет лежать новый SC файл. В нём будут только те экспорты,
имена которых описаны в файле `exports.txt`.

## Зависимости

- Supercell SWF: используется для работы с файлами форматов SC и SC2.

- FlatBuffers: необходим для генерации классов из `.fbs`-файлов, так как
  переопределяются классы библиотеки Supercell SWF (см.
  [Технические особенности](#технические-особенности)).

## Технические особенности

В проекте переопределяются некоторые классы из библиотеки Supercell SWF.
Из-за этого возникает необходимость включать в проект генерацию классов FlatBuffers из
`.fbs`-файлов. Этот процесс настроен в Gradle с помощью соответствующих плагинов.

Если вы не планируете переопределять классы библиотеки, в которых используются
FlatBuffers, то можете не включать в своем проекте в Gradle всё, что связано с
FlatBuffers.

Я предпочитаю не включать сгенерированные файлы в git-репозиторий, но здесь
для наглядности оставил их.

## Лицензия

Начиная с коммита adba913 (не включительно), этот проект распространяется под лицензией MIT. Подробности смотреть в файле [LICENSE](LICENSE).

Весь код до коммита adba913 (включительно) распространялся под лицензией GNU GPLv3.

---

Возможно, вы искали SC Editor или информацию о нём, если это так,
то [вам сюда](https://github.com/danila-schelkov/sc-editor).

Если у вас возникнут вопросы или предложения, пожалуйста, создайте Issue.
